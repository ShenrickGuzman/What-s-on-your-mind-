<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>What's on your mind? ✨</title>
	<link rel="stylesheet" href="styles.css">
	<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400;700&family=Fredoka:wght@400;600;700&family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
	<!-- Logout button top left -->
	<button id="logoutBtn" class="logout-btn" style="position:fixed;top:24px;left:24px;z-index:1001;padding:10px 28px;background:#ff6b6b;color:#fff;font-size:1.1rem;border:none;border-radius:22px;font-weight:800;box-shadow:0 2px 8px rgba(0,0,0,0.10);cursor:pointer;transition:background 0.2s;display:none;letter-spacing:1px;text-align:center;">Log Out</button>
	<!-- Theme toggle -->
	<button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
		<i class="fas fa-moon icon" id="themeIcon"></i>
	</button>

	<!-- Mood-based background emojis -->
	<div class="mood-emojis" id="moodEmojis">
		<!-- Happy mood emojis -->
		<div class="mood-emoji" data-mood="Happy">😀</div>
		<div class="mood-emoji" data-mood="Happy">😁</div>
		<div class="mood-emoji" data-mood="Happy">😊</div>
		<div class="mood-emoji" data-mood="Happy">😄</div>
		<div class="mood-emoji" data-mood="Happy">😃</div>
		<div class="mood-emoji" data-mood="Happy">😆</div>
		<div class="mood-emoji" data-mood="Happy">😋</div>
		<div class="mood-emoji" data-mood="Happy">🤗</div>
		
		<!-- Curious mood emojis -->
		<div class="mood-emoji" data-mood="Curious">🤔</div>
		<div class="mood-emoji" data-mood="Curious">🧐</div>
		<div class="mood-emoji" data-mood="Curious">🤨</div>
		<div class="mood-emoji" data-mood="Curious">🤓</div>
		<div class="mood-emoji" data-mood="Curious">👀</div>
		<div class="mood-emoji" data-mood="Curious">🔍</div>
		<div class="mood-emoji" data-mood="Curious">💭</div>
		<div class="mood-emoji" data-mood="Curious">❓</div>
		
		<!-- Stressed mood emojis -->
		<div class="mood-emoji" data-mood="Stressed">😓</div>
		<div class="mood-emoji" data-mood="Stressed">😩</div>
		<div class="mood-emoji" data-mood="Stressed">😰</div>
		<div class="mood-emoji" data-mood="Stressed">😨</div>
		<div class="mood-emoji" data-mood="Stressed">😱</div>
		<div class="mood-emoji" data-mood="Stressed">😵</div>
		<div class="mood-emoji" data-mood="Stressed">💦</div>
		<div class="mood-emoji" data-mood="Stressed">😤</div>
		
		<!-- Excited mood emojis -->
		<div class="mood-emoji" data-mood="Excited">🎉</div>
		<div class="mood-emoji" data-mood="Excited">🤩</div>
		<div class="mood-emoji" data-mood="Excited">😄</div>
		<div class="mood-emoji" data-mood="Excited">🎊</div>
		<div class="mood-emoji" data-mood="Excited">🎈</div>
		<div class="mood-emoji" data-mood="Excited">✨</div>
		<div class="mood-emoji" data-mood="Excited">🚀</div>
		<div class="mood-emoji" data-mood="Excited">💫</div>
		
		<!-- In love mood emojis -->
		<div class="mood-emoji" data-mood="In love">❤️</div>
		<div class="mood-emoji" data-mood="In love">💕</div>
		<div class="mood-emoji" data-mood="In love">💖</div>
		<div class="mood-emoji" data-mood="In love">💗</div>
		<div class="mood-emoji" data-mood="In love">💓</div>
		<div class="mood-emoji" data-mood="In love">💝</div>
		<div class="mood-emoji" data-mood="In love">🥰</div>
		<div class="mood-emoji" data-mood="In love">😍</div>
		
		<!-- Sad mood emojis -->
		<div class="mood-emoji" data-mood="Sad">😢</div>
		<div class="mood-emoji" data-mood="Sad">😔</div>
		<div class="mood-emoji" data-mood="Sad">☹️</div>
		<div class="mood-emoji" data-mood="Sad">😞</div>
		<div class="mood-emoji" data-mood="Sad">😥</div>
		<div class="mood-emoji" data-mood="Sad">😭</div>
		<div class="mood-emoji" data-mood="Sad">🥺</div>
		<div class="mood-emoji" data-mood="Sad">😿</div>
		
		<!-- Bored mood emojis -->
		<div class="mood-emoji" data-mood="Bored">😐</div>
		<div class="mood-emoji" data-mood="Bored">🥱</div>
		<div class="mood-emoji" data-mood="Bored">😴</div>
		<div class="mood-emoji" data-mood="Bored">😑</div>
		<div class="mood-emoji" data-mood="Bored">😶</div>
		<div class="mood-emoji" data-mood="Bored">💤</div>
		<div class="mood-emoji" data-mood="Bored">🫥</div>
		<div class="mood-emoji" data-mood="Bored">😪</div>
		
		<!-- Fine mood emojis -->
		<div class="mood-emoji" data-mood="Fine">🙂</div>
		<div class="mood-emoji" data-mood="Fine">😌</div>
		<div class="mood-emoji" data-mood="Fine">😊</div>
		<div class="mood-emoji" data-mood="Fine">😉</div>
		<div class="mood-emoji" data-mood="Fine">😏</div>
		<div class="mood-emoji" data-mood="Fine">🤗</div>
		<div class="mood-emoji" data-mood="Fine">😇</div>
		<div class="mood-emoji" data-mood="Fine">🤝</div>
	</div>

	<!-- Animated background particles -->
	<div class="particles-container">
		<div class="particle"></div>
		<div class="particle"></div>
		<div class="particle"></div>
		<div class="particle"></div>
		<div class="particle"></div>
		<div class="particle"></div>
		<div class="particle"></div>
		<div class="particle"></div>
	</div>

	<!-- Decorative floating emojis -->
	<div class="floating-elements">
		<div class="floating-emoji">✨</div>
		<div class="floating-emoji">🎈</div>
		<div class="floating-emoji">💡</div>
		<div class="floating-emoji">🎉</div>
		<div class="floating-emoji">⭐</div>
	</div>

	<div class="container">
		<header class="header">
			<div class="title" style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0; width: 100%;">
				<div class="welcome-title" style="font-size:2.1rem;font-weight:900;text-align:center;">Welcome Margarets <span class="waving-heart">👋</span></div>
			</div>

			<div class="welcome-bubble">
				<div class="welcome-message">Share your ideas, questions, wins, or shoutouts—this is our St. Margaret Random Thoughts Sharing!</div>
				<div class="welcome-message">Too shy to share? No worries! Only Sir Charles can read your thoughts/messages 😊</div>
			</div>
			<div class="title-container">
				<div class="floating-sparkle sparkle-1">✨</div>
				<div class="floating-sparkle sparkle-2">✨</div>
				<div class="floating-sparkle sparkle-3">✨</div>
				<div class="floating-sparkle sparkle-4">✨</div>
				<h1 class="title">
					What's on your mind?
					<span class="sparkles">✨</span>
				</h1>
			</div>
		</header>

		<main class="main-content">
			<form id="thoughtForm" class="thought-form" action="https://formspree.io/f/xnnzykwz" method="POST" novalidate>
				<!-- Name + Anonymous toggle -->
				<div class="row">
					<div class="field">
						<label for="nameInput" class="label">Your name (optional)</label>
						<input type="text" id="nameInput" name="name" class="text-input" placeholder="Type your name or nickname">
					</div>
					<div class="toggle-field">
						<label class="switch">
							<input type="checkbox" id="anonToggle" checked>
							<span class="slider"></span>
						</label>
						<span class="toggle-text">Send anonymously</span>
					</div>
				</div>

				<!-- Mood picker -->
				<div class="mood-picker">
					<span class="mood-label">Mood:</span>
					<div class="moods" role="radiogroup" aria-label="Choose your mood">
						<button type="button" class="mood active" data-mood="Happy" aria-pressed="true">😀 Happy</button>
						<button type="button" class="mood" data-mood="Curious" aria-pressed="false">🤔 Curious</button>
						<button type="button" class="mood" data-mood="Stressed" aria-pressed="false">😵‍💫 Stressed</button>
						<button type="button" class="mood" data-mood="Excited" aria-pressed="false">🎉 Excited</button>
						<button type="button" class="mood" data-mood="In love" aria-pressed="false">😍 In love</button>
						<button type="button" class="mood" data-mood="Sad" aria-pressed="false">😢 Sad</button>
						<button type="button" class="mood" data-mood="Bored" aria-pressed="false">🥱 Bored</button>
						<button type="button" class="mood" data-mood="Fine" aria-pressed="false">🙂 Fine</button>
					</div>
					<input type="hidden" name="mood" id="moodInput" value="Happy">
				</div>

				<!-- Prompt suggestions -->
				<div class="prompts">
					<span class="prompt-label">Need inspo?</span>
					<div class="prompt-chips">
						<button type="button" class="chip" data-prompt="Today I learned...">Today I learned...</button>
						<button type="button" class="chip" data-prompt="A win I’m proud of...">A win I’m proud of...</button>
						<button type="button" class="chip" data-prompt="I’m stuck on...">I’m stuck on...</button>
						<button type="button" class="chip" data-prompt="Shoutout to... for...">Shoutout to... for...</button>
						<button type="button" class="chip random" id="randomPrompt"><i class="fa-solid fa-shuffle"></i> Surprise me</button>
					</div>
				</div>

				<!-- Thought input -->
				<div class="input-container">
					<label for="thoughtInput" class="label">What’s on your mind?</label>
					<textarea
						id="thoughtInput"
						name="message"
						placeholder="What’s on your mind? 🧠"
						required
						maxlength="1000"
						class="thought-input"
						aria-describedby="charHelp"
					></textarea>
					<div class="character-count" id="charHelp">
						<span id="charCount">0</span>/1000
					</div>
				</div>

				<!-- Live preview bubble -->
				<div class="preview" id="preview" aria-hidden="true">
					<div class="bubble">
						<span id="previewText"></span>
						<span class="tail"></span>
					</div>
				</div>

				<!-- Fun vibe meter -->
				<div class="vibe">
					<span class="vibe-label">Vibe meter:</span>
					<div class="vibe-bar">
						<div class="vibe-fill" id="vibeFill"></div>
					</div>
					<div class="vibe-emoji" id="vibeEmoji" aria-hidden="true">
						<span class="face" data-level="1">🙂</span>
						<span class="face" data-level="2">😊</span>
						<span class="face" data-level="3">😃</span>
						<span class="face" data-level="4">😄</span>
						<span class="face" data-level="5">🤩</span>
					</div>
				</div>

				<!-- Message visibility selector -->
				<div class="visibility-selector" style="margin: 18px 0 8px 0;">
					<label class="label" style="font-weight:600;">Message visibility:</label>
					<div class="visibility-options" style="margin-top:6px;display:flex;gap:18px;">
						<label style="color:#111;"><input type="radio" name="visibility" value="public" id="visibilityPublic" checked> Public (everyone can see your message)</label>
						<label style="color:#111;"><input type="radio" name="visibility" value="private" id="visibilityPrivate"> Private (only Sir Charles can see your message)</label>
					</div>
				</div>

				<!-- Submit -->
				<button type="submit" class="send-button">
					<i class="fas fa-rocket"></i>
					Send Thought!
				</button>

				<!-- View Public Thoughts Button -->
				<a href="public.html" class="view-public-btn" style="display:inline-block;margin-top:16px;padding:10px 22px;background:#4ecdc4;color:#fff;border-radius:24px;font-weight:600;text-decoration:none;box-shadow:0 2px 8px rgba(0,0,0,0.07);transition:background 0.2s;">
					<i class="fas fa-users"></i> View Public Thoughts
				</a>
			</form>

			<div id="successMessage" class="success-message hidden" role="status" aria-live="polite">
				<div class="success-content">
					<i class="fas fa-check-circle"></i>
					<h3>Thanks for sharing your thoughts! 🎉</h3>
					<p>Your message has been sent successfully!</p>
					<button id="newThoughtBtn" class="new-thought-btn">
						<i class="fas fa-plus"></i>
						Share Another Thought
					</button>
				</div>
			</div>
		</main>

		<section class="tips">
			<h2 class="tips-title">Ideas to share</h2>
			<div class="tips-grid">
				<div class="tip-card">💡 A study hack that works for you</div>
				<div class="tip-card">🙋 A question you’re curious about</div>
				<div class="tip-card">🏆 A small win from this week</div>
				<div class="tip-card">🤝 A shoutout to a classmate</div>
			</div>
		</section>

		<footer class="footer">
			<p>Made with <i class="fas fa-heart"></i> by SHEN ✨</p>
		</footer>
	</div>

	<script src="script.js"></script>
		<script>
		// Show logout button if authenticated, otherwise redirect
		fetch('/api/auth/status')
			.then(res => res.json())
			.then(data => {
				const logoutBtn = document.getElementById('logoutBtn');
				if (data.authenticated) {
					if (logoutBtn) logoutBtn.style.display = 'inline-block';
				} else {
					window.location.href = 'auth.html';
				}
			});
		// Logout logic
		document.addEventListener('DOMContentLoaded', function() {
			const logoutBtn = document.getElementById('logoutBtn');
			if (logoutBtn) {
				logoutBtn.addEventListener('click', function() {
					fetch('/api/auth/logout', { method: 'POST' })
						.then(() => {
							window.location.href = 'auth.html';
						});
				});
			}
		});
		</script>
</body>
</html>
